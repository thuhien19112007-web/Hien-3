<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Dải Ngân Hà Kỷ Niệm</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
:root{--pink:#ff4d6d}

*{box-sizing:border-box}

body{
    margin:0;
    background:#000;
    color:var(--pink);
    font-family:'Dancing Script',cursive;
    overflow:hidden;
    height:100vh;
    touch-action:manipulation;
}

/* SAO */
#star-field{position:fixed;inset:0;z-index:0}
.star{
    position:absolute;
    background:#fff;
    border-radius:50%;
    animation:twinkle var(--d) infinite ease-in-out;
}
@keyframes twinkle{
    0%,100%{opacity:.3}
    50%{opacity:1}
}

/* GALAXY */
#galaxy{
    position:fixed;
    inset:0;
    z-index:1;
    pointer-events:none;
}

/* ITEM */
.floating-item{
    position:absolute;
    bottom:-240px;
    display:flex;
    flex-direction:column;
    align-items:center;
    animation:flyUp linear forwards;
}

.floating-item img{
    width:90px;        /* nhỏ hơn cho mobile */
    max-width:80vw;
    border-radius:10px;
    border:1px solid #fff;
    box-shadow:0 0 10px rgba(255,77,109,.4);
}

.floating-item span{
    font-size:18px;    /* chuẩn mobile */
    line-height:1.3;
    font-weight:bold;
    margin-top:4px;
    text-align:center;
    max-width:85vw;
    white-space:normal;
    text-shadow:2px 2px 4px #000;
}

@keyframes flyUp{
    0%{transform:translateY(0);opacity:0}
    10%{opacity:1}
    90%{opacity:1}
    100%{transform:translateY(-140vh);opacity:0}
}

/* TIM */
.heart{
    position:fixed;
    font-size:26px;
    pointer-events:none;
    animation:heartFly 1s ease-out forwards;
    z-index:2000;
}
@keyframes heartFly{
    to{transform:translateY(-120px) scale(1.8);opacity:0}
}

/* THƯ */
#letter{
    display:none;
    position:fixed;
    inset:0;
    margin:auto;
    width:90%;
    max-width:360px;
    background:#fff;
    color:#222;
    padding:22px;
    border-radius:18px;
    border:2px solid var(--pink);
    box-shadow:0 0 25px var(--pink);
    text-align:center;
    z-index:1000;
}

button{
    padding:10px 20px;
    background:var(--pink);
    color:#fff;
    border:none;
    border-radius:10px;
    font-size:16px;
}
</style>
</head>

<body onclick="handleTap(event)" ondblclick="showLetter()">

<div id="star-field"></div>
<div id="galaxy"></div>

<audio id="bg-music" loop>
    <source src="https://files.catbox.moe/pdx0di.mp3" type="audio/mpeg">
</audio>

<div id="letter">
    <h2 style="color:var(--pink)">Gửi cậu ❤️</h2>
    <p>Giữa hàng tỷ ngôi sao, thật may mắn vì gặp được nhau.</p>
    <p>Mong rằng chúng ta sẽ luôn ở đây.</p>
    <button onclick="closeLetter(event)">Đóng lại</button>
</div>

<script>
/* SAO */
const starField=document.getElementById("star-field");
for(let i=0;i<100;i++){
    const s=document.createElement("div");
    s.className="star";
    const size=Math.random()*2+1;
    s.style.width=size+"px";
    s.style.height=size+"px";
    s.style.left=Math.random()*100+"%";
    s.style.top=Math.random()*100+"%";
    s.style.setProperty("--d",Math.random()*3+2+"s");
    starField.appendChild(s);
}

/* CHỮ */
const texts=[
 "Cảm ơn vì đã đến ❤️",
 "Giữa vũ trụ rộng lớn",
 "Cậu là điều đặc biệt",
 "Trân trọng từng khoảnh khắc",
 "Luôn ở đây nhé",
 "Always and Forever",
 "Only You",
 "Yêu thương vô tận",
 "Chúng ta của sau này",
 "Nắm tay nhau thật lâu"
];

const images=[
 "https://uploads.onecompiler.io/447zjgzuc/447zezy92/6206919c-2fc8-4e1f-acaf-9cdf526d21ba.jpg",
 "https://uploads.onecompiler.io/447zjgzuc/447zezy92/e4aac67f-0bca-472f-a7ff-c6129bcdabd6.jpg"
];

/* ITEM */
const galaxy=document.getElementById("galaxy");
let activeItems=0;
const MAX_ITEMS=20;

function createItem(){
    if(activeItems>=MAX_ITEMS) return;
    activeItems++;

    const item=document.createElement("div");
    item.className="floating-item";

    // 20% có ảnh
    if(Math.random()>0.8){
        const img=document.createElement("img");
        img.src=images[Math.floor(Math.random()*images.length)];
        img.loading="lazy";
        item.appendChild(img);
    }

    // 2 DÒNG CHỮ
    for(let i=0;i<2;i++){
        const span=document.createElement("span");
        span.textContent=texts[Math.floor(Math.random()*texts.length)];
        item.appendChild(span);
    }

    item.style.left=Math.random()*90+"%";
    const duration=Math.random()*3+6;
    item.style.animationDuration=duration+"s";

    galaxy.appendChild(item);

    setTimeout(()=>{
        item.remove();
        activeItems--;
    },duration*1000);
}

setInterval(createItem,700);

/* TAP + NHẠC */
let musicStarted=false;
function handleTap(e){
    const h=document.createElement("div");
    h.className="heart";
    h.style.left=e.clientX+"px";
    h.style.top=e.clientY+"px";
    h.innerHTML="❤️";
    document.body.appendChild(h);
    h.addEventListener("animationend",()=>h.remove());

    if(!musicStarted){
        document.getElementById("bg-music").play().catch(()=>{});
        musicStarted=true;
    }
}

/* THƯ */
function showLetter(){
    document.getElementById("letter").style.display="block";
}
function closeLetter(e){
    e.stopPropagation();
    document.getElementById("letter").style.display="none";
}
</script>

</body>
</html>
